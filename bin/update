#!/bin/sh

set -e

sudo softwareupdate --install --all

brew update
brew upgrade
brew cleanup

repositories=( .dotfiles .rbenv .rbenv/plugins/ruby-build .oh-my-zsh )

for repo in ${repositories[@]}
do
	(cd $HOME/$repo && git pull)
done

for rubyversion in $(rbenv versions --bare)
do
	RBENV_VERSION=$rubyversion gem update --system
	RBENV_VERSION=$rubyversion gem update
	RBENV_VERSION=$rubyversion gem cleanup
done

npm --quiet install -g npm@latest
